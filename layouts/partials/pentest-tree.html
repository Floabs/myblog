{{- $root := site.GetPage "section" "pentest-notes" -}}
{{- $current := .current | default . -}}
{{- $allOpen := .allOpen | default false -}}
{{- if $root -}}
  <div class="pentest-tree">
    <p class="eyebrow">Notebook</p>
    <a class="tree-root-link" href="{{ $root.RelPermalink }}">{{ $root.Title }}</a>
    <ul class="tree-root">
      {{- range $root.Sections.ByWeight -}}
        {{ partial "pentest-tree-node.html" (dict "node" . "current" $current "allOpen" $allOpen) }}
      {{- end -}}
    </ul>
    <div class="tree-actions">
      <button class="btn ghost tree-toggle" type="button" data-tree-action="expand">Expand all</button>
      <button class="btn ghost tree-toggle" type="button" data-tree-action="collapse">Collapse all</button>
      <a class="btn ghost" href="/search/">Search Notes</a>
    </div>
  </div>
{{- end -}}
