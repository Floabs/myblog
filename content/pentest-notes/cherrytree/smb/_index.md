---
title: "SMB"
date: 2025-05-11
summary: "On Windows mostly running on Port 445 only"
tags: ["smb"]
source: "cherrytree"
---

On Windows mostly running on Port 445 only
On Linux it runs over 139 over TCP /  IP

Enumeration with null (anonymous sessions)
```text
smbclient -N -L //10.129.14.128
```

or with smbMap:
```text
smbmap -H 10.129.14.128
```

with -r can recursively browse
```text
smbmap -H 10.129.14.128 -r notes
```

Downloading/Uploading:
```text
smbmap -H 10.129.14.128 --download "notes\note.txt"
```

```text
smbmap -H 10.129.14.128 -upload "notes\note.txt"
```

Very usefull for enumeration is rpcclient with null session:

```text
rpcclient -U'%' 10.10.110.17
```

```text
rpcclient $> enumdomusers
```

all commands:
[https://www.willhackforsushi.com/sec504/SMB-Access-from-Linux.pdf](https://www.willhackforsushi.com/sec504/SMB-Access-from-Linux.pdf)

Also very powerful tool:
```text
./enum4linux-ng.py 10.10.11.45 -A -C
```

github:
[https://github.com/cddmp/enum4linux-ng](https://github.com/cddmp/enum4linux-ng)

Sometimes password spraying is better than brute forcing single user:
```text
crackmapexec smb 10.10.110.17 -u /tmp/userlist.txt -p 'Company01!' --local-auth
```
